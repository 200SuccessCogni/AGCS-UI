import{u as v,b as I,a as S,j as t,B as n,T as i,t as k}from"./index-8f45885e.js";import{A as w}from"./AuthForm-7d417fd8.js";import{L as A}from"./Link-ee79aced.js";import"./shared.service-6180cc91.js";import"./TextField-321b1eb0.js";import"./OutlinedInput-3d147791.js";import"./useFormControl-c11f480c.js";function T(){const{setUser:h,setAlert:p}=v(),[x,r]=I.useState(!1),o=S(),f=async(y,j)=>{var a,l,u,d,m,c,g;r(!0);try{const s=await k("/auth/signin",{email:y,password:j});if(s&&s.status&&s.status===200)if(s.data.data&&s.data.msg==="Success"){localStorage.setItem("token",s.data.data.token);const e=(a=s.data.data)==null?void 0:a.user,b={id:e==null?void 0:e._id,fullname:e==null?void 0:e.name,email:e==null?void 0:e.email,phoneNo:e==null?void 0:e.mobile,business:{businessId:(l=e.businessId)==null?void 0:l._id,businessName:(u=e.businessId)==null?void 0:u.name,address:(d=e.businessId)==null?void 0:d.address,businessUrl:(m=e.businessId)==null?void 0:m.webUrl,domain:(c=e.businessId)==null?void 0:c.domain,country:(g=e.businessId)==null?void 0:g.originCountry},pmLevel:e==null?void 0:e.permissionLevel};h(b),localStorage.setItem("user",JSON.stringify(b)),localStorage.getItem("introDone")?o("/"):o("/onboarding")}else p({title:"Alert",show:!0,message:s.data.msg})}catch(s){console.log(s)}r(!1)};return t.jsx(n,{sx:{display:"flex",justifyContent:"center",height:"100vh",width:"100vw",background:"rgb(178, 226, 254)"},children:t.jsxs(n,{sx:{background:"#eee",margin:{xs:0,md:"2rem"},borderRadius:{xs:0,md:"1rem"},maxWidth:{xs:"100%",md:"30%"},p:5,display:"flex",justifyContent:"space-between",flexDirection:"column"},children:[t.jsxs(n,{mb:3,children:[t.jsx(i,{variant:"body2",fontWeight:"bold",lineHeight:.9,children:"CFRA"}),t.jsx(i,{variant:"caption",gutterBottom:!0,children:"Customer Feedback and Review Analysis"})]}),t.jsxs(n,{my:"auto",children:[t.jsx(i,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:"Welcome"}),t.jsx(w,{isLogin:!0,loading:x,onSubmit:f})]}),t.jsxs(i,{variant:"body2",align:"center",gutterBottom:!0,sx:{my:3},children:["Not register yet."," ",t.jsx(A,{component:"button",variant:"body2",onClick:()=>{o("/signup")},children:"Sign up"})," ","here."]})]})})}export{T as default};
